<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="com.isix.easyGym.mypage.dao.MypageDAO">  <!-- namespace는 mapper의 이름을 정의 -->

	<resultMap type="memberDTO" id="memberResult">
        <result property="memberNo" column="memberNo"/>
        <result property="memberName" column="memberName"/>
        <result property="memberId" column="memberId"/>
        <result property="memberPwd" column="memberPwd"/>
        <result property="memberPhone" column="memberPhone"/>
        <result property="memberEmail" column="memberEmail"/>
        <result property="memberAddr" column="memberAddr"/>
        <result property="memberPost" column="memberPost"/>
        <result property="memberCreatedAt" column="memberCreatedAt"/>
        <result property="memberState" column="memberState"/>
        <result property="memberGender" column="memberGender"/>
        <result property="memberMarketing" column="memberMarketing"/>
        <result property="memberPointDate" column="memberPointDate"/>
        <result property="memberPoint" column="memberPoint"/>
        <result property="memberPointDes" column="memberPointDes"/> 
        <result property="memberExpirationDate" column="memberExpirationDate"/>
        <result property="memberCoupon" column="memberCoupon"/>
        <result property="memberCouponDes" column="memberCouponDes"/>       
    </resultMap>
 	
	<resultMap type="detailDTO" id="detailResult">
 		<result property="detailNo" column="detailNo"/>
 		<result property="detailDate" column="detailDate"/>
 		<result property="detailRoadAddress" column="detailRoadAddress"/>
 		<result property="detailBusinessName" column="detailBusinessName"/>
 		<result property="detailBusinessEng" column="detailBusinessEng"/>
 		<result property="detailDailyTicket" column="detailDailyTicket"/>
 		<result property="detailMonthlyTicket" column="detailMonthlyTicket"/>
 		<result property="detailScope" column="detailScope"/>
 		<result property="detailComment" column="detailComment"/>
 		<result property="detailServiceProgram" column="detailServiceProgram"/>
 		<result property="reviewNo" column="reviewNo"/>
 		<result property="detailStatus" column="detailStatus"/>
 		<result property="detailClassification" column="detailClassification"/>
 		<result property="detailFreeService" column="detailFreeService"/>
 		<result property="detailMonthlyPrice" column="detailMonthlyPrice"/>
 		<result property="detailKoClassification" column="detailKoClassification"/>
 		<result property="detailTest" column="detailTest"/>
 	</resultMap>
 	
 	<resultMap type="detailDibsDTO" id="detailDibsResult">
 		<result property="dibsNo" column="dibsNo"/>
 		<result property="detailNo" column="detailNo"/>
 		<result property="memberNo" column="memberNo"/>
 	</resultMap>
 	
 	<!-- 찜 목록 쿼리문 -->
 	<select id="selectAllDetail" resultMap="detailResult" parameterType="int">
 		<![CDATA[
 			select d.detailNo, d.detailBusinessName, d.detailKoClassification, d.detailRoadAddress 
 			from detail_tbl d 
 			join detaildibs_tbl j on d.detailNo=j.detailNo 
 			where j.memberNo = #{memberNo}
 		]]>
 	</select>

   <delete id="deleteDibs" parameterType="map">
   		<![CDATA[
		    DELETE FROM detaildibs_tbl 
		    WHERE memberNo = #{memberNo} AND detailNo = #{detailNo}
	    ]]>
	</delete>

 	
 	<!-- 포인트 쿼리문 
 	<select id="selectPointsByMemberNo" parameterType="int" resultType="memberDTO">
	    <![CDATA[
	        SELECT memberPointDate, memberPoint, memberPointDes
	        FROM member_tbl
	        WHERE member_no = #{memberNo}
	    ]]>
	</select> -->
	
	<!-- 회원정보 수정 쿼리문 
	<update id="updateMember">
		<![CDATA[
	        UPDATE member_tbl
	        SET
	            memberPwd = #{memberPwd},
	            memberName = #{memberName},
	            memberGender = #{memberGender},
	            memberPhone = #{memberPhone},
	            memberEmail = #{memberEmail}
	        WHERE memberNo = #{memberNo}
		]]>
    </update> -->
 	
 </mapper>